# ============================================
# HTACCESS PRINCIPAL - public_html/
# Configuración para inmodb.net
# ============================================

# Activar RewriteEngine
RewriteEngine On

# ============================================
# FORCE HTTPS (excepto para Let's Encrypt)
# ============================================
RewriteCond %{HTTPS} off
RewriteCond %{HTTP:CDN-LOOP} !cloudflare
RewriteCond %{REQUEST_URI} !^/.well-known/acme-challenge/
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L,QSA]

# ============================================
# SUBDOMINIO: admin.inmodb.net → /admin/public/
# ============================================
RewriteCond %{HTTP_HOST} ^admin\.inmodb\.net$ [NC]
RewriteCond %{REQUEST_URI} !^/admin/public/ [NC]
RewriteRule ^(.*)$ /admin/public/$1 [L]

# ============================================
# DOMINIO PRINCIPAL: inmodb.net → /client/
# ============================================
RewriteCond %{HTTP_HOST} ^(www\.)?inmodb\.net$ [NC]
RewriteCond %{REQUEST_URI} !^/client/ [NC]
RewriteCond %{REQUEST_URI} !^/admin/ [NC]
RewriteRule ^(.*)$ /client/$1 [L]

# ============================================
# OPCIONAL: Redirigir www a no-www
# ============================================
# Descomenta si quieres forzar sin www
# RewriteCond %{HTTP_HOST} ^www\.inmodb\.net$ [NC]
# RewriteRule ^(.*)$ https://inmodb.net/$1 [R=301,L]
